<script>

//Function for randomly selecting either rock, paper, or scissors for the CPU
function computerPlay() {
    let cpuChoice = Math.floor(Math.random() * 3);

    if (cpuChoice === 0) {
        return 'rock';
    } else if (cpuChoice === 1) {
        return 'paper';
    } else {
        return 'scissors';
    }
}

//Function for prompting and selecting the player's choice
function playerSelection() {
    let playerChoice = prompt('Please enter rock, paper, or scissors'); 

        playerChoice = playerChoice.toLowerCase();
        
        switch(playerChoice) {
            case 'rock':
                return playerChoice;
                break;

            case 'paper':
                return playerChoice;
                break;

            case 'scissors':
                return playerChoice;
                break; 
        }
    }

//Setting the starting score and rounds counter
let computerScore = 0;
let playerScore = 0;
let gameRounds = 0;

//Function for playing one round, executes computer and player selection functions
//Sets win/lose conditions, and alerts for the player
function playRound() {
    let computer = computerPlay();
    let player = playerSelection();

    if (((player) === 'rock' && (computer) === 'scissors') ||
    ((player) === 'paper' && (computer) === 'rock') ||
    ((player) === 'scissors' && (computer) === 'paper')) {
        gameRounds ++;
        playerScore ++;
        alert(`You won this round! You chose ${player} and CPU chose ${computer}!`);
    } else if ((player) === (computer)) {
        gameRounds ++;
        alert(`Draw! You both chose ${player}!`); 
    } else if ((player) === undefined) {
        alert(`Oops! That doesn't look quite right. Try again!`);
    } else {
        gameRounds ++;
        computerScore ++;
        alert(`You lose this round! CPU chose ${computer} and you chose ${player}!`);
    } 

    alert("Round: " + gameRounds + " -- " + "Player: " + playerScore + " - CPU: " + computerScore);
}

//Function for a full game of 5 rounds
//Uses a loop to execute playRound 5 times, and displays results in console.log
//Includes conditions for tiebreak scenario
//Includes alerts for final result, win or lose
function game() {
    for (let i = 0; i < 5; i ++) {
        playRound();
        console.log("Rounds played: ", gameRounds);
        console.log("Player score: ", playerScore);
        console.log("CPU score: ", computerScore);
    }

    while (playerScore === computerScore) {
    if (gameRounds >= 5) {
        alert(`Tiebreaker round!`);
        playRound();
        console.log("Rounds played: ", gameRounds);
        console.log("Player score: ", playerScore);
        console.log("CPU score: ", computerScore);  
    }
  }  

    if (playerScore > computerScore) {
        alert('You win!');
    } else {
        alert('You lose!');
    }
}

//Function on page load, asks player whether to start game
//If yes, executes game() function, and if no, quits out
    function startGame(Question, yes, no) {
        if (confirm(Question)) yes()
        else no();
    }

    startGame(
        "Start a 5-round game?",
        function () {game()},
        function () {alert('You quit!');}
    );

//Displays final scores in console.log    
console.log("Total rounds played: ", gameRounds);
console.log("Final player score: ", playerScore);
console.log("Final CPU score: ", computerScore);

</script>